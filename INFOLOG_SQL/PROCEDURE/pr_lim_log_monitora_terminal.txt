CREATE OR REPLACE PROCEDURE pr_lim_log_monitora_terminal
AS
   -- Deletar todos os dados da tabela tlog_monitora_terminal anteriores a um mês.
CURSOR C1 IS
SELECT
 NUM_TERMN      ,
 NUM_SEQUE_TER
FROM TLOG_MONITORA_TERMINAL
WHERE DHR_ALTER <= TRUNC(SYSDATE-60);
RC1 C1%ROWTYPE;
--
BEGIN
OPEN C1;
LOOP
  FETCH C1 INTO RC1;
  IF C1%NOTFOUND THEN
     EXIT;
  END IF;
  DELETE
 TLOG_MONITORA_TERMINAL_DET
  WHERE
 NUM_TERMN = RC1.NUM_TERMN
  AND NUM_SEQUE_TER = RC1.NUM_SEQUE_TER;
--
  DELETE
 TLOG_MONITORA_TERMINAL
  WHERE
 NUM_TERMN = RC1.NUM_TERMN
  AND NUM_SEQUE_TER = RC1.NUM_SEQUE_TER;
--
  COMMIT;
END LOOP;
END;