 CREATE OR REPLACE
 FUNCTION FC_QTDE_MACRO_VIAGEM( PNUM_ID_TERMINAL NUMBER, 
 								    PNUM_MACRO NUMBER,	
 								    PDHR_INICIO NUMBER, 
 								    PDHR_TERMINO NUMBER) 
 RETURN NUMBER
 AS
 CURSOR
 MACRO IS
 	SELECT COUNT(*) AS Qtd_real
 	FROM MCT_MACRO
	WHERE num_mct = PNUM_ID_TERMINAL
	AND NUM_MACRO = PNUM_MACRO
	AND TO_CHAR(DHR_EVENT,'YYYYMMDD') BETWEEN PDHR_INICIO AND PDHR_TERMINO;
   	
 cMACRO MACRO%ROWTYPE;  
 
 BEGIN
  OPEN MACRO;
  FETCH MACRO INTO cMACRO;
  IF MACRO%NOTFOUND THEN	 
 	 RETURN(NULL);
  END IF;
  CLOSE MACRO;
  RETURN(cMACRO.Qtd_real);
 END;    