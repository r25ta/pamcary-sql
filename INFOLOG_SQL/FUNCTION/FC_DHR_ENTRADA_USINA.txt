CREATE OR REPLACE
FUNCTION            FC_DHR_ENTRADA_USINA (PCTL_VIA NUMBER)
RETURN DATE
AS
CURSOR
 EU IS
 SELECT dhr_efeti_rea AS dhr_entra_usi
   FROM SUPERVISOR.ROTEIRO_MOTORISTA
  WHERE sit_fase_rea = 'R'
    AND ctl_parad = 17
    AND ctl_plvia = PCTL_VIA;
 EUR EU%ROWTYPE;
BEGIN
 OPEN EU;
 FETCH EU INTO EUR;
 IF EU%NOTFOUND THEN
    RETURN(NULL);
 END IF;
 CLOSE EU;
 RETURN(EUR.dhr_entra_usi);
END;
/
