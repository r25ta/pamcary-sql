CREATE OR REPLACE
FUNCTION FC_ID_VEICULO (PCTL_VIA NUMBER)
RETURN VARCHAR2
AS
CURSOR
 MCT IS
 SELECT NVL(VPL.num_mct, 0 ) AS num_id_terminal
   FROM SUPERVISOR.VEICULO_PLANO_VIAGEM VPL
  WHERE VPL.ctl_plvia = PCTL_VIA
    AND VPL.num_mct IS NOT NULL;
 RMCT MCT%ROWTYPE;
BEGIN
 OPEN MCT;
 FETCH MCT INTO RMCT;
 IF MCT%NOTFOUND THEN
    RETURN(NULL);
 END IF;
 CLOSE MCT;
 RETURN(RMCT.num_id_terminal);
END;
/
