CREATE OR REPLACE
FUNCTION FC_TARIFACAO_LOGISTICA (PCTL_VIA NUMBER, PCTL_EVE NUMBER)
RETURN DATE
AS
CURSOR
 TLOGIS IS
 SELECT dhr_event
   FROM TARIFACAO_LOGISTICA
  WHERE ctl_plvia = PCTL_VIA
    AND ctl_event = PCTL_EVE;
 RTLOGIS TLOGIS%ROWTYPE;
BEGIN
 OPEN TLOGIS;
 FETCH TLOGIS INTO RTLOGIS;
 IF TLOGIS%NOTFOUND THEN
    RETURN(NULL);
 END IF;
 CLOSE TLOGIS;
 RETURN(RTLOGIS.dhr_event);
END;
/
