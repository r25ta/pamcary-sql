CREATE OR REPLACE
FUNCTION            FC_DHR_SAIDA_USINA (PCTL_VIA NUMBER)
RETURN DATE
AS
CURSOR
 SU IS
 SELECT dhr_efeti_rea AS dhr_saida_usi
   FROM SUPERVISOR.ROTEIRO_MOTORISTA
  WHERE sit_fase_rea = 'R'
    AND ctl_parad = 18
    AND ctl_plvia = PCTL_VIA;
 SUR SU%ROWTYPE;
BEGIN
 OPEN SU;
 FETCH SU INTO SUR;
 IF SU%NOTFOUND THEN
    RETURN(NULL);
 END IF;
 CLOSE SU;
 RETURN(SUR.dhr_saida_usi);
END;
/
